---
layout: post
categories: –æ–±—É—á–µ–Ω–∏–µ
title: What Are Tokio and Async IO All About?
author: Manish Goregaokar
original: https://manishearth.github.io/blog/2018/01/10/whats-tokio-and-async-io-all-about/#fnref:2
translator: bmusin
---

–°–æ–æ–±—â–µ—Å—Ç–≤–æ Rust –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–ª–æ –º–Ω–æ–≥–æ —Å–≤–æ–∏—Ö —É—Å–∏–ª–∏–π –Ω–∞
–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–º –≤–≤–æ–¥–µ/–≤—ã–≤–æ–¥–µ, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º –≤ –≤–∏–¥–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [`Tokio`][tokio].
–ò —ç—Ç–æ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ.

–ú–Ω–æ–≥–∏–º –∏–∑ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞, —Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞–º–∏ –∏
—Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Å —ç—Ç–∏–º –≤–µ—â–∞–º–∏, –Ω–µ —è—Å–Ω–æ, —á–µ–≥–æ –∂–µ –º—ã —Ö–æ—Ç–∏–º –¥–æ–±–∏—Ç—å—Å—è. –ö–æ–≥–¥–∞ —ç—Ç–∏
–≤–µ—â–∏ –æ–±—Å—É–∂–¥–∞–ª–∏—Å—å –≤–æ –≤—Ä–µ–º–µ–Ω–∞ –≤–µ—Ä—Å–∏–∏ 1.0, —è —Ç–æ–∂–µ –∏–º–µ–ª —Å–º—É—Ç–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ–±
—ç—Ç–æ–º, –Ω–∏–∫–æ–≥–¥–∞ –ø—Ä–µ–∂–¥–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–≤ —Å —ç—Ç–∏–º —Ä–∞–Ω—å—à–µ.

- –ß—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–µ - **Async I/O**?
- –ß—Ç–æ —Ç–∞–∫–æ–µ –∫–æ—Ä—É—Ç–∏–Ω—ã (**_coroutines_**)?
- –ß—Ç–æ —Ç–∞–∫–æ–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –Ω–∏—Ç–∏ (**_threads_**)?
- –ß—Ç–æ —Ç–∞–∫–æ–µ —Ñ—É—Ç—É—Ä—ã? (**_futures_**)?


- **–ö–∞–∫ –æ–Ω–∏ —Å–æ—á–µ—Ç–∞—é—Ç—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π?**

<!--cut-->

---
## –ö–∞–∫—É—é –ø—Ä–æ–±–ª–µ–º—É –º—ã –ø—ã—Ç–∞–µ–º—Å—è —Ä–µ—à–∏—Ç—å?

–û–¥–Ω–æ–π –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π Rust —è–≤–ª—è–µ—Ç—Å—è "–±–µ–∑–±–æ—è–∑–Ω–µ–Ω–Ω–∞—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å"
(**_fearless concurrency_**). –û–¥–Ω–∞–∫–æ —Ç–æ—Ç –≤–∏–¥ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–µ–Ω –¥–ª—è
–æ–±—Ä–∞–±–æ—Ç–∫–∏ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–¥–∞—á, –∑–∞–≤–∏—Å—è—â–∏—Ö –æ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
–≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ (**_I/O_**), –∏ –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç—Å—è –≤ Go, Elixir, Erlang - –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
–≤ Rust.

–î–∞–≤–∞–π—Ç–µ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ —Å–æ–±—Ä–∞—Ç—å —á—Ç–æ-—Ç–æ –Ω–∞–ø–æ–¥–æ–±–∏–µ –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞. –û–Ω
–±—É–¥–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç—ã—Å—è—á–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏
(–ø—Ä–æ–±–ª–µ–º–∞ [c10k][]). –ì–æ–≤–æ—Ä—è –æ–±—â–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–∞—è –Ω–∞–º–∏ –ø—Ä–æ–±–ª–µ–º–∞
—Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –º–Ω–æ–≥–∏—Ö –∑–∞–¥–∞—á, –≤—ã–ø–æ–ª–Ω—è—é—â–∏—Ö –≤ –æ—Å–Ω–æ–≤–Ω–æ–º I/O –æ–ø–µ—Ä–∞—Ü–∏–∏ (–æ—Å–æ–±–µ–Ω–Ω–æ
—Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å —Å–µ—Ç–µ–≤—ã–º –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ–º).

"–û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ N –∑–∞–¥–∞—á" - —Ç–∞–∫–∞—è –∑–∞–¥–∞—á–∞ –ª—É—á—à–µ –≤—Å–µ–≥–æ —Ä–µ—à–∞–µ—Ç—Å—è
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∏—Ç–µ–π. –û–¥–Ω–∞–∫–æ... _–¢—ã—Å—è—á–∏_ –Ω–∏—Ç–µ–π? –ù–∞–≤–µ—Ä–Ω–æ–µ, —ç—Ç–æ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ.
–†–∞–±–æ—Ç–∞ —Å –Ω–∏—Ç—è–º–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–æ–≤–æ–ª—å–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–∑–∞—Ç—Ä–∞—Ç–Ω–æ–π: –∫–∞–∂–¥–∞—è –Ω–∏—Ç—å –¥–æ–ª–∂–Ω–∞
–≤—ã–¥–µ–ª–∏—Ç—å –±–æ–ª—å—à–æ–π —Å—Ç–µ–∫ (**_stack_**), –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –Ω–∏—Ç—å, –∏—Å–ø–æ–ª—å–∑—É—è –Ω–∞–±–æ—Ä —Å–∏—Å—Ç–µ–º–Ω—ã—Ö
–≤—ã–∑–æ–≤–æ–≤. –ö–æ –≤—Å–µ–º—É –ø—Ä–æ—á–µ–º—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ç–æ–∂–µ –∑–∞—Ç—Ä–∞—Ç–Ω–æ.

–ö–æ–Ω–µ—á–Ω–æ, —Ç—ã—Å—è—á–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –Ω–∏—Ç–µ–π –Ω–µ –±—É–¥–µ—Ç: –≤—ã –∏–º–µ–µ—Ç–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–µ
—á–∏—Å–ª–æ —è–¥–µ—Ä (**_core_**), –∏ **–≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –Ω–∏—Ç—å –±—É–¥–µ—Ç
–∏—Å–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–∞ —ç—Ç–æ–º —è–¥—Ä–µ**.

–ù–æ –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –ø–æ–¥–æ–±–Ω—ã—Ö –¥–∞–Ω–Ω–æ–º—É –≤–µ–±-—Å–µ—Ä–≤–µ—Ä—É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —ç—Ç–∏—Ö –Ω–∏—Ç–µ–π –Ω–µ –±—É–¥—É—Ç
–¥–µ–ª–∞—Ç—å –Ω–∏–∫–∞–∫–æ–π —Ä–∞–±–æ—Ç—ã. –û–Ω–∏ –±—É–¥—É—Ç –∂–¥–∞—Ç—å –∏–ª–∏ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞, –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏
–æ—Ç–≤–µ—Ç–∞.

C –æ–±—ã—á–Ω—ã–º–∏ –Ω–∏—Ç—è–º–∏, –∫–æ–≥–¥–∞ –≤—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ –±–ª–æ–∫–∏—Ä—É—é—â—É—é I/O –æ–ø–µ—Ä–∞—Ü–∏—é, —Å–∏—Å—Ç–µ–º–Ω—ã–π
–≤—ã–∑–æ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è–¥—Ä—É, –∫–æ—Ç–æ—Ä–æ–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—Ç–∏—Ç –Ω–∏—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
–æ–±—Ä–∞—Ç–Ω–æ, –ø–æ—Ç–æ–º—É —á—Ç–æ, –≤–µ—Ä–æ—è—Ç–Ω–æ, I/O –æ–ø–µ—Ä–∞—Ü–∏—è –µ—â–µ –Ω–µ –∑–∞–≤–µ—Ä—à–∏–ª–∞—Å—å. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ
—è–¥—Ä–æ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∫–∞–∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å "–ø–æ–¥–≥—Ä—É–∑–∏—Ç—å" (**_swap
in_**) –¥—Ä—É–≥—É—é –Ω–∏—Ç—å –∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–π –Ω–∏—Ç–∏ (–Ω–∞—á–∞–≤—à–µ–π I/O
–æ–ø–µ—Ä–∞—Ü–∏—é) –∫–æ–≥–¥–∞ I/O –æ–ø–µ—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Ç–æ –µ—Å—Ç—å –∫–æ–≥–¥–∞ –∏—Å—Ö–æ–¥–Ω–∞—è –Ω–∏—Ç—å
–±—É–¥–µ—Ç "—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞" (**_unblocked_**). –í–æ—Ç —Ç–∞–∫ –≤—ã —Ä–µ—à–∞–µ—Ç–µ —Ç–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –≤
Rust, –∫–æ–≥–¥–∞ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `Tokio` –∏ –ø–æ–¥–æ–±–Ω—ã–µ –µ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ - –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ
–º–∏–ª–ª–∏–æ–Ω –Ω–∏—Ç–µ–π –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç–µ –û–° —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å (**_schedule_**)
–∑–∞–ø—É—Å–∫ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –Ω–∏—Ç–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç I/O.

–ù–æ, –∫–∞–∫ –º—ã —É–∂–µ –≤—ã—è—Å–Ω–∏–ª–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∏—Ç–µ–π –Ω–µ –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è
–¥–ª—è –∑–∞–¥–∞—á, –ø–æ–¥–æ–±–Ω—ã—Ö –¥–∞–Ω–Ω–æ–π. (1)

–ù–∞–º –Ω—É–∂–Ω—ã –±–æ–ª–µ–µ "–ª–µ–≥–∫–∏–µ" –Ω–∏—Ç–∏.

---
## –ú–æ–¥–µ–ª—å –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω–æ—Å—Ç–∏ –æ—Å–Ω–æ–≤–∞–Ω–Ω–∞—è –Ω–∞ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã—Ö –Ω–∏—Ç—è—Ö (_lightweight threads_).
–î—É–º–∞—é, –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω—è—Ç—å –¥–∞–Ω–Ω—É—é –º–æ–¥–µ–ª—å, –Ω—É–∂–Ω–æ –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è
–æ—Ç–≤–ª–µ—á—å—Å—è –æ—Ç Rust –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —è–∑—ã–∫, –∫–æ—Ç–æ—Ä—ã–π —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —ç—Ç–∏–º —Ö–æ—Ä–æ—à–æ, Go.

–¢–∞–∫, **Go** –∏–º–µ–µ—Ç –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –Ω–∏—Ç–∏, –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ –≥–æ—Ä—É—Ç–∏–Ω–∞–º–∏ (**_goroutines_**).
–í—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –∏—Ö –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞ `go`. –í–µ–±-—Å–µ—Ä–≤–µ—Ä –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å
–∫–æ–¥, –ø–æ–¥–æ–±–Ω—ã–π —Å–ª–µ–¥—É—é—â–µ–º—É:
```rust
listener, err = net.Listen(...)
// –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É
for {
    conn, err := listener.Accept()
    // –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –æ—à–∏–±–∫—É

    // –∑–∞–ø—É—Å—Ç–∏—Ç—å –≥–æ—Ä—É—Ç–∏–Ω—É
    go handler(conn)
}
```
–≠—Ç–æ —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π –æ–∂–∏–¥–∞–µ—Ç –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è –Ω–æ–≤—ã—Ö TCP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—É—é
–≥–æ—Ä—É—Ç–∏–Ω—É –∏ –≤ –Ω–µ–π —Ñ—É–Ω–∫—Ü–∏—é `handler`. –ö–∞–∂–¥–æ–µ —Å–µ—Ç–µ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±—É–¥–µ—Ç
–æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–æ–π, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥—É—Ç —É–Ω–∏—á—Ç–æ–∂–∞—Ç—å—Å—è –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏
–≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ `handler`. –í —Ç–æ –∂–µ —Å–∞–º–æ–µ –≤—Ä–µ–º—è –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –±—É–¥–µ—Ç
–≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –≥–æ—Ä—É—Ç–∏–Ω–µ.

–ï—Å–ª–∏ —ç—Ç–æ –Ω–µ –Ω–∞—Å—Ç–æ—è—â–∏–µ (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –û–°) –Ω–∏—Ç–∏, —Ç–æ —á—Ç–æ —Ç–æ–≥–¥–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç?

–ì–æ—Ä—É—Ç–∏–Ω–∞ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏–º–µ—Ä–æ–º –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–π –Ω–∏—Ç–∏. –û–° –Ω–∏—á–µ–≥–æ –æ –Ω–∏—Ö –Ω–µ –∑–Ω–∞–µ—Ç, –æ–Ω–∞
–≤–∏–¥–∏—Ç N –Ω–∏—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Go (**_Go
runtime_**, –¥–∞–ª–µ–µ –°–í Go).

–°–í Go –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–∞ –Ω–∏—Ö M –≥–æ—Ä—É—Ç–∏–Ω (2), –ø–æ–¥–≥—Ä—É–∂–∞—è –∏
–≤—ã–≥—Ä—É–∂–∞—è –≥–æ—Ä—É—Ç–∏–Ω—ã –ø–æ–¥–æ–±–Ω–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫—É (**_scheduler_**) –û–°. –°–í Go –º–æ–∂–µ—Ç —ç—Ç–æ
–¥–µ–ª–∞—Ç—å –±–ª–∞–≥–æ–¥–∞—Ä—è —Ç–æ–º—É, —á—Ç–æ Go-–∫–æ–¥ –¥–æ–ø—É—Å–∫–∞–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ (_interruptible_),
–ø–æ–∑–≤–æ–ª—è—è —Å–±–æ—Ä—â–∏–∫—É –º—É—Å–æ—Ä–∞ (**_GC_**) –¥–µ–ª–∞—Ç—å —Å–≤–æ—é —Ä–∞–±–æ—Ç—É. –í—Å–µ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç
–≤–æ–∑–º–æ–∂–Ω—ã–º –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –Ω–∞–º–µ—Ä–µ–Ω–Ω—É—é –æ—Å—Ç–∞–Ω–æ–≤–∫—É —Ä–∞–±–æ—Ç—ã –≥–æ—Ä—É—Ç–∏–Ω—ã.

–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫
–æ—Å–≤–µ–¥–æ–º–ª–µ–Ω –æ —Å–∏—Å—Ç–µ–º–µ I/O, –ø–æ—ç—Ç–æ–º—É –∫–æ–≥–¥–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –∂–¥—ë—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–∏ I/O,
–æ–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–æ –Ω–∞ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫—É –æ–±—Ä–∞—Ç–Ω–æ.

–í —Å—É—â–Ω–æ—Å—Ç–∏ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è Go-—Ñ—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –∏–º–µ—Ç—å –Ω–∞–±–æ—Ä —Ä–∞–∑–±—Ä–æ—Å–∞–Ω–Ω—ã—Ö –ø–æ –Ω–µ–π
–º–µ—Å—Ç, –≥–¥–µ –æ–Ω–∞ –≥–æ–≤–æ—Ä–∏—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫—É –∏ GC: "–í–æ–∑—å–º–∏—Ç–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ–±–µ, –µ—Å–ª–∏ –≤—ã
—Ö–æ—Ç–∏—Ç–µ" (–∏ —Ç–∞–∫–∂–µ "–Ø –æ–∂–∏–¥–∞—é —Ç–æ-—Ç–æ –∏ —Ç–æ-—Ç–æ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–æ–∑—å–º–∏—Ç–µ –∫–æ–Ω—Ç—Ä–æ–ª—å —Å–µ–±–µ).

–ö–æ–≥–¥–∞ –≥–æ—Ä—É—Ç–∏–Ω–∞ –ø–æ–¥–≥—Ä—É–∂–µ–Ω–∞ –≤ –Ω–∏—Ç—å –û–°, –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã –±—É–¥—É—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –∏
—É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Ç–µ–∫—É—â—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é (_program counter_, **_PC_**) –±—É–¥–µ—Ç –ø–µ—Ä–µ–≤–µ–¥—ë–Ω
–Ω–∞ –Ω–æ–≤—É—é –≥–æ—Ä—É—Ç–∏–Ω—É.

–ù–æ —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Å–æ —Å—Ç–µ–∫–æ–º? –ù–∏—Ç–∏ –û–° –∏–º–µ—é—Ç –±–æ–ª—å—à–æ–π —Å—Ç–µ–∫ –ø—Ä–∏ —Å–µ–±–µ, –æ–Ω –Ω—É–∂–µ–Ω –¥–ª—è
—Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å.

Go –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–µ–∫–∏ (_segmented stacks_). –ü—Ä–∏—á–∏–Ω–æ–π —Ç–æ–≥–æ,
–ø–æ—á–µ–º—É –Ω–∏—Ç—å –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ –±–æ–ª—å—à–æ–º —Å—Ç–µ–∫–µ, –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ
—è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è (–Ø–ü), –≤–∫–ª—é—á–∞—è C, –æ–∂–∏–¥–∞—é—Ç, —á—Ç–æ —Å—Ç–µ–∫ –±—É–¥–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–º,
–∏ —Å—Ç–µ–∫–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø–µ—Ä–µ–≤—ã–¥–µ–ª–µ–Ω—ã (_reallocated_), –∫–∞–∫ –º—ã –ø–æ—Å—Ç—É–ø–∞–µ–º —Å
—Ä–∞—Å—Ç—É—â–∏–º–∏ –±—É—Ñ–µ—Ä–∞–º–∏ –ø–∞–º—è—Ç–∏, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –æ–∂–∏–¥–∞–µ–º, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–µ–∫–µ –±—É–¥—É—Ç
–æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–æ–º –∂–µ –º–µ—Å—Ç–µ, –ø–æ–∑–≤–æ–ª—è—è —É–∫–∞–∑–∞—Ç–µ–ª—è–º –Ω–∞ –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–µ–∫–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å
—Ä–∞–±–æ—Ç–∞—Ç—å. –¢–∞–∫ —á—Ç–æ –º—ã –±–ª–∞–≥–æ—Ä–∞–∑—É–º–Ω–æ —Ä–µ–∑–µ—Ä–≤–∏—Ä—É–µ–º –¥–ª—è —Å–µ–±–µ –≤–µ—Å—å —Å—Ç–µ–∫, –∫–æ—Ç–æ—Ä—ã–π –ø–æ
–Ω–∞—à–µ–º—É –º–Ω–µ–Ω–∏—é, –Ω–∞–º –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è (–ø—Ä–∏–º–µ—Ä–Ω–æ 8 –ú–ë). –ü—Ä–∏ —ç—Ç–æ–º –º—ã –æ–∂–∏–¥–∞–µ–º,
—á—Ç–æ —ç—Ç–æ–≥–æ –Ω–∞–º —Ö–≤–∞—Ç–∏—Ç.

–ù–æ –æ–∂–∏–¥–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ —Å—Ç–µ–∫–∏ –±—É–¥—É—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–º–∏, —Å—Ç—Ä–æ–≥–æ –≥–æ–≤–æ—Ä—è, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.
–í Go —Å—Ç–µ–∫–∏ —Å–æ—Å—Ç–æ—è—Ç –∏–∑ –Ω–µ–±–æ–ª—å—à–∏—Ö –∫—É—Å–æ—á–∫–æ–≤. –ö–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –æ–Ω–∞
–ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–∏ –º–µ—Å—Ç–∞ –Ω–∞ —Å—Ç–µ–∫–µ –¥–ª—è –µ–µ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è, –∏ –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ
–≤—ã–¥–µ–ª—è–µ—Ç –Ω–æ–≤—ã–π –∫—É—Å–æ—á–µ–∫ —Å—Ç–µ–∫–∞ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –Ω—ë–º. –¢–∞–∫ —á—Ç–æ –µ—Å–ª–∏ –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ
–∏–º–µ—Ç—å —Ç—ã—Å—è—á–∏ –Ω–∏—Ç–µ–π, –≤—ã–ø–æ–ª–Ω—è—é—â–∏—Ö –Ω–µ–±–æ–ª—å—à–æ–π –æ–±—ä—ë–º —Ä–∞–±–æ—Ç—ã, –æ–Ω–∏ –≤—Å–µ –ø–æ–ª—É—á–∞—Ç —Ç—ã—Å—è—á–∏
–Ω–µ–±–æ–ª—å—à–∏—Ö —Å—Ç–µ–∫–æ–≤, –∏ –≤—Å—ë –±—É–¥–µ—Ç —Ö–æ—Ä–æ—à–æ.

–ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Å–µ–≥–æ–¥–Ω—è Go –¥–µ–ª–∞–µ—Ç –Ω–µ–º–Ω–æ–∂–∫–æ –¥—Ä—É–≥–æ–µ: –æ–Ω –∫–æ–ø–∏—Ä—É–µ—Ç —Å—Ç–µ–∫–∏. –Ø
—É–ø–æ–º—è–Ω—É–ª, —á—Ç–æ —Å—Ç–µ–∫–∏ –Ω–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ –ø–µ—Ä–µ–≤—ã–¥–µ–ª–µ–Ω—ã, –û–∂–∏–¥–∞–µ—Ç—Å—è, —á—Ç–æ
–¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å—Ç–µ–∫–µ –±—É–¥—É—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –Ω–∞ —Ç–æ–º –∂–µ –º–µ—Å—Ç–µ. –ù–æ —ç—Ç–æ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ç–∞–∫, –ø–æ—Ç–æ–º—É
—á—Ç–æ Go –∏–º–µ–µ—Ç GC, –ø–æ—ç—Ç–æ–º—É –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –∑–Ω–∞–µ—Ç, –∫–∞–∫–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ —á—Ç–æ
—É–∫–∞–∑—ã–≤–∞—é—Ç, –∏ –º–æ–∂–µ—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞—Ç—å —É–∫–∞–∑—ã–≤–∞—é—â–∏–µ –Ω–∞ —Å—Ç–µ–∫
—É–∫–∞–∑–∞—Ç–µ–ª–∏.

–í –ª—é–±–æ–º —Å–ª—É—á–∞–µ —Å–∏—Å—Ç–µ–º–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Go —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–æ–¥–æ–±–Ω—ã–º–∏ –≤–µ—â–∞–º–∏.
–≥–æ—Ä—É—Ç–∏–Ω—ã –æ—á–µ–Ω—å –¥–µ—à–µ–≤—ã, –∏ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏—Ö —Ç—ã—Å—è—á–∏, –±–µ–∑ –∫–∞–∫–∏—Ö –±—ã —Ç–æ
–Ω–∏ –±—ã–ª–æ –ø—Ä–æ–±–ª–µ–º.

Rust _–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª_ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ/green –Ω–∏—Ç–∏ (–Ø –≤–µ—Ä—é, —á—Ç–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª
—Å–µ–≥–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç–µ–∫–∏). –û–¥–Ω–∞–∫–æ Rust —Ç—â–∞—Ç–µ–ª—å–Ω–æ —Å–ª–µ–¥–∏—Ç –∑–∞ —Ç–µ–º, —á—Ç–æ–±—ã –≤—ã –Ω–µ
–ø–ª–∞—Ç–∏–ª–∏ –∑–∞ —Ç–µ –≤–µ—â–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ, –∏ —ç—Ç–æ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã—Ö
–Ω–∏—Ç–µ–π) –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞ –≤–µ—Å—å –≤–∞—à –∫–æ–¥, –¥–∞–∂–µ –µ—Å–ª–∏ –≤—ã —ç—Ç–∏ —Å–∞–º—ã–µ
–ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –Ω–∏—Ç–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ.

**–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ-–Ω–∏—Ç–∏ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏–∑ Rust –¥–æ –≤—ã–ø—É—Å–∫–∞ –≤–µ—Ä—Å–∏–∏ 1.0**.

---
## –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥
–û—Å–Ω–æ–≤–Ω—ã–º —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º –±–ª–æ–∫–æ–º —ç—Ç–æ–≥–æ —è–≤–ª—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –≤–≤–æ–¥/–≤—ã–≤–æ–¥. –ö–∞–∫ –±—ã–ª–æ
—É–ø–æ–º—è–Ω—É—Ç–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–∞–∑–¥–µ–ª–µ, —Å –æ–±—ã—á–Ω—ã–º **–±–ª–æ–∫–∏—Ä—É—é—â–∏–º I/O**, –≤ –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞
–≤—ã –Ω–∞—á–∏–Ω–∞–µ—Ç–µ I/O-–æ–ø–µ—Ä–∞—Ü–∏—é, –≤–∞—à–µ–π –Ω–∏—Ç–∏ –Ω–µ –±—É–¥–µ—Ç –ø–æ–∑–≤–æ–ª–µ–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
(–æ–Ω–∞ —Å—Ç–∞–ª–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–π) –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏—è –±—É–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –≠—Ç–æ —Ö–æ—Ä–æ—à–æ,
–∫–æ–≥–¥–∞ –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ —Å –Ω–∏—Ç—è–º–∏ –û–° (–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –û–° –¥–µ–ª–∞–µ—Ç –∑–∞ –≤–∞—Å –≤—Å—é —Ä–∞–±–æ—Ç—É!), –Ω–æ
–µ—Å–ª–∏ –≤—ã –∏–º–µ–µ—Ç –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –Ω–∏—Ç–∏, –≤—ã –∑–∞—Ö–æ—Ç–∏—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å –ª–µ–≥–∫–æ–≤–µ—Å–Ω—É—é –Ω–∏—Ç—å, –∫–æ—Ç–æ—Ä–∞—è
–∑–∞–ø—É—â–µ–Ω–∞ –Ω–∞ –Ω–∏—Ç–∏ –û–°, –¥—Ä—É–≥–æ–π –Ω–∏—Ç—å—é.

–í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ **–Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–π I/O**, –≥–¥–µ –Ω–∏—Ç—å —Å—Ç–∞–≤–∏—Ç –≤ –æ—á–µ—Ä–µ–¥—å
–∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ I/O –≤ –û–° –∏ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ. I/O-–∑–∞–ø—Ä–æ—Å –±—É–¥–µ—Ç
–≤—ã–ø–æ–ª–Ω–µ–Ω —è–¥—Ä–æ–º —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω–∏—Ç—å –¥–æ–ª–∂–Ω–∞ –±—É–¥–µ—Ç —Å–ø—Ä–æ—Å–∏—Ç—å —É
–û–°: "–ó–∞–≤–µ—Ä—à–∏–ª–∞—Å—å –ª–∏ –º–æ—è I/O-–æ–ø–µ—Ä–∞—Ü–∏—è?", –ø–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç
I/O.

–†–∞–∑—É–º–µ–µ—Ç—Å—è, —á–∞—Å—Ç–æ–µ –≤—ã—è—Å–Ω–µ–Ω–∏–µ —É –û–° —Ç–æ–≥–æ, –∑–∞–≤–µ—Ä—à–∏–ª–∞ –ª–∏ –æ–Ω–∞ I/O, —Ç—Ä–µ–±—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã.
–í–æ—Ç –ø–æ—á–µ–º—É –∏–º–µ—é—Ç—Å—è —Ç–∞–∫–∏–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –≤—ã–∑–æ–≤—ã, –∫–∞–∫ `epoll`. –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ
—Å–æ–±—Ä–∞—Ç—å –≤–º–µ—Å—Ç–µ –Ω–∞–±–æ—Ä –Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã—Ö I/O-–æ–ø–µ—Ä–∞—Ü–∏–π –∏ –∑–∞—Ç–µ–º –ø–æ–ø—Ä–æ—Å–∏—Ç—å –û–° —Ä–∞–∑–±—É–¥–∏—Ç—å
–≤–∞—à—É –Ω–∏—Ç—å, –∫–æ–≥–¥–∞ –∫–æ–≥–¥–∞ –∫–∞–∫–∞—è-–ª–∏–±–æ –∏–∑ —ç—Ç–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –±—É–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –¢–∞–∫ —á—Ç–æ –≤—ã
–º–æ–∂–µ—Ç–µ –∏–º–µ—Ç—å –Ω–∏—Ç—å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ (–Ω–∞—Å—Ç–æ—è—â—É—é –Ω–∏—Ç—å), –∫–æ—Ç–æ—Ä–∞—è –≤—ã–≥—Ä—É–∂–∞–µ—Ç –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ
–Ω–∏—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ–∂–∏–¥–∞—é—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è I/O. –ö–æ–≥–¥–∞ –∂–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç, –Ω–∏—Ç—å
–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –º–æ–∂–µ—Ç —É–π—Ç–∏ –≤ —Å–æ–Ω (_sleep_), –≤—ã–∑–≤–∞–≤ `epoll`, –æ–∂–∏–¥–∞—è –¥–æ —Ç–µ—Ö –ø–æ—Ä,
–ø–æ–∫–∞ –û–° –Ω–µ —Ä–∞–∑–±—É–¥–∏—Ç –µ—ë (–∫–æ–≥–¥–∞ –æ–¥–Ω–∞ –∏–∑ I/O –æ–ø–µ—Ä–∞—Ü–∏–π –±—É–¥–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∞).

–ó–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–Ω—ã–π –∑–¥–µ—Å—å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –º–µ—Ö–∞–Ω–∏–∑–º, –≤–µ—Ä–æ—è—Ç–Ω–æ, —Å–ª–æ–∂–Ω–µ–µ.

–í–µ—Ä–Ω–µ–º—Å—è –∫ Rust. Rust –∏–º–µ–µ—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫—É [`mio`][mio], –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è
–ø–ª–∞—Ç—Ñ–æ—Ä–º–æ-–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –æ–±—ë—Ä—Ç–∫–æ–π (_wrapper_) –Ω–∞–¥ –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏–º I/O –∏
–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏, –∫–∞–∫ `epoll` (GNU/Linux), `kqueue` (FreeBSD), –∏ —Ç. –¥. –≠—Ç–æ
—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫, –∏ —Ö–æ—Ç—è —Ç–µ–º, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤—ã–∫–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `epoll` –≤ C
–Ω–∞–ø—Ä—è–º—É—é, —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è —É–¥–æ–±–Ω—ã–º, —ç—Ç–æ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ–π
–º–æ–¥–µ–ª–∏ –∫–∞–∫ Go. –û–¥–Ω–∞–∫–æ –º—ã –º–æ–∂–µ–º —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∏—á—å.

---
## –§—É—Ç—É—Ä—ã (_futures_)
–Ø–≤–ª—è—é—Ç—Å—è –µ—â—ë –æ–¥–Ω–∏–º —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–º –±–ª–æ–∫–æ–º. `Future` - –æ–±–µ—â–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ
—Ä–∞–Ω–æ –∏–ª–∏ –ø–æ–∑–¥–Ω–æ –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω–æ –∑–Ω–∞—á–µ–Ω–∏–µ (–≤ JavaScript –æ–Ω–∏ –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è `Promise`).

–ù–∞–ø—Ä–∏–º–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ —Å–¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –ø—Ä–∏—Ö–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ —Å–µ—Ç–µ–≤–æ–π —Å–æ–∫–µ—Ç –∏
–ø–æ–ª—É—á–∏—Ç—å `Future` –æ–±—Ä–∞—Ç–Ω–æ (–Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ `Stream`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–¥–æ–±–µ–Ω —Ñ—É—Ç—É—Ä–µ, –Ω–æ
–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–π). –≠—Ç–∞ `Future` –Ω–µ –±—É–¥–µ—Ç
—Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤ —Å–µ–±–µ –æ—Ç–≤–µ—Ç–∞, –Ω–æ –±—É–¥–µ—Ç –∑–Ω–∞—Ç—å, –∫–æ–≥–¥–∞ –æ–Ω –ø—Ä–∏–¥—ë—Ç. –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å
`wait()` —É `Future`, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –±—É–¥–µ—Ç
–ø–æ–ª—É—á–µ–Ω–æ —Ä–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –¢–∞–∫–∂–µ –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–∑–≤–∞—Ç—å `poll()` —É `Future`,
—Å–ø—Ä–∞—à–∏–≤–∞—è, –Ω–µ –≥–æ—Ç–æ–≤ –ª–∏ —É `Future` –æ—Ç–≤–µ—Ç (–æ–Ω–∞ –¥–∞—Å—Ç –≤–∞–º –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç,
–µ—Å–ª–∏ –æ–Ω –∏–º–µ–µ—Ç—Å—è).

–§—É—Ç—É—Ä—ã –º–æ–≥—É—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω—ã –≤ —Ü–µ–ø–æ—á–∫—É, —Ç–∞–∫ —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø–∏—Å–∞—Ç—å –∫–æ–¥ –Ω–∞–ø–æ–¥–æ–±–∏–µ
`future.then(|result| process(result))`. –ü–µ—Ä–µ–¥–∞–Ω–Ω–æ–µ `then` –∑–∞–º—ã–∫–∞–Ω–∏–µ
(_closure_) —Å–∞–º–æ –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–≤–µ—Å—Ç–∏ –µ—â–µ –æ–¥–Ω—É —Ñ—É—Ç—É—Ä—É, —Ç–∞–∫ —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–µ–¥–∏–Ω—è—Ç—å
–≤ —Ü–µ–ø–æ—á–∫—É –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—É—â–Ω–æ—Å—Ç–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä, I/O –æ–ø–µ—Ä–∞—Ü–∏–∏. C —Ñ—É—Ç—É—Ä–∞–º–∏ –Ω–∞ —Ü–µ–ø–æ—á–∫–µ
`poll()` —è–≤–ª—è–µ—Ç—Å—è —Å–ø–æ—Å–æ–±–æ–º –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–≥–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã; –∫–∞–∂–¥—ã–π —Ä–∞–∑,
–∫–æ–≥–¥–∞ –≤—ã –≤—ã–∑—ã–≤–∞–µ—Ç–µ –µ—ë, –æ–Ω–∞ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–ª–µ–¥—É—é—â–µ–π —Ñ—É—Ç—É—Ä–µ, –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏,
—á—Ç–æ —Ç–µ–∫—É—â–∞—è —Ñ—É—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞ (—Å–æ–¥–µ—Ä–∂–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç).

–≠—Ç–æ —Ö–æ—Ä–æ—à–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–µ–≥–æ I/O.

–°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Ñ—É—Ç—É—Ä –≤ —Ü–µ–ø–æ—á–∫—É —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–¥–æ–±–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã–º –≤ —Ü–µ–ø–æ—á–∫—É –∏—Ç–µ—Ä–∞—Ç–æ—Ä–∞–º.
–ö–∞–∂–¥—ã–π –≤—ã–∑–æ–≤ `and_then` (–∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä) –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É,
–∫–æ—Ç–æ—Ä–∞—è —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Ñ—É—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –º–æ–∂–µ—Ç
—Å–æ–¥–µ—Ä–∂–∞—Ç—å –≤ —Å–µ–±–µ –∑–∞–º—ã–∫–∞–Ω–∏–µ. –°–∞–º–∏ –ø–æ —Å–µ–±–µ –∑–∞–º—ã–∫–∞–Ω–∏—è –Ω–µ—Å—É—Ç —Å–≤–æ–∏ —Å—Å—ã–ª–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ
—Å —Å–æ–±–æ–π, —Ç–∞–∫ —á—Ç–æ –≤—Å–µ —ç—Ç–æ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏–µ —Å—Ç–µ–∫–∏!

---
## üóº Tokio üóº
`Tokio` - —ç—Ç–æ –≤ —Å—É—â–Ω–æ—Å—Ç–∏ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—ë—Ä—Ç–∫–∞ –Ω–∞–¥ `mio`, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç
—Ñ—É—Ç—É—Ä—ã. Tokio –∏–º–µ–µ—Ç –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π (**_event loop_**) –∏ –≤—ã –ø–µ—Ä–µ–¥–∞–µ—Ç–µ –µ–º—É –∑–∞–º—ã–∫–∞–Ω–∏—è,
–∫–æ—Ç–æ—Ä—ã–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ñ—É—Ç—É—Ä—ã. –≠—Ç–æ—Ç —Ü–∏–∫–ª –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –≤—Å–µ –∑–∞–º—ã–∫–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ
–≤—ã –µ–º—É –ø–µ—Ä–µ–¥–∞–¥–∏—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É—è `mio` –¥–ª—è –≤—ã—è—Å–Ω–µ–Ω–∏—è —Ç–æ–≥–æ, –∫–∞–∫–∏–µ —Ñ—É—Ç—É—Ä—ã, –º–æ–≥—É—Ç
–ø—Ä–æ–≥—Ä–µ—Å—Å–∏—Ä–æ–≤–∞—Ç—å, –∏ –ø—Ä–æ–¥–≤–∏–≥–∞—Ç—å –∏—Ö –¥–∞–ª–µ–µ (–≤—ã–∑—ã–≤–∞—è `poll()`).

–ù–∞ –∏–¥–µ–π–Ω–æ–º —É—Ä–æ–≤–Ω–µ —ç—Ç–æ —É–∂–µ –¥–æ–≤–æ–ª—å–Ω–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ç–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç Go. –í—ã –¥–æ–ª–∂–Ω—ã
–≤—Ä—É—á–Ω—É—é –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –≥–ª–∞–≤–Ω—ã–π —Å–æ–±—ã—Ç–∏–π–Ω—ã–π —Ü–∏–∫–ª (–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫), –∏ –∫–∞–∫ —Ç–æ–ª—å–∫–æ –≤—ã
—Å–¥–µ–ª–∞–µ—Ç–µ —ç—Ç–æ, –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ü–∏–∫–ª—É –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –¥–µ–ª–∞—é—Ç
I/O. –ö–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ –æ–¥–Ω–∞ –∏–∑ —Ç–µ–∫—É—â–∏—Ö –∑–∞–¥–∞—á –±—É–¥–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞ –Ω–∞
I/O-–æ–ø–µ—Ä–∞—Ü–∏–∏, —Ü–∏–∫–ª –±—É–¥–µ—Ç –ø–æ–¥–≥—Ä—É–∂–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É. –ö–ª—é—á–µ–≤—ã–º –æ—Ç–ª–∏—á–∏–µ–º —è–≤–ª—è–µ—Ç—Å—è
—Ç–æ, —á—Ç–æ `Tokio` —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –æ–¥–Ω–æ–π –Ω–∏—Ç–∏, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ Go –º–æ–∂–µ—Ç
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –Ω–∏—Ç–µ–π –û–° –¥–ª—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è. –û–¥–Ω–∞–∫–æ –≤—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å
–∑–∞–¥–∞—á–∏, —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞, –Ω–∞ –¥—Ä—É–≥–∏–µ –Ω–∏—Ç–∏ –û–° –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
–∫–∞–Ω–∞–ª—ã (_channels_) –¥–ª—è –∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è, —á—Ç–æ –Ω–µ —Å–ª–æ–∂–Ω–æ.

–•–æ—Ç—è –Ω–∞ –∏–¥–µ–π–Ω–æ–º —É—Ä–æ–≤–Ω–µ —ç—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ç–æ, —á—Ç–æ –º—ã –∏–º–µ–µ–º –≤ Go, –∫–æ–¥ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ
–æ—á–µ–Ω—å –ø—Ä–∏–≥–ª—è–¥–Ω–æ. C–ª–µ–¥—É—é—â–∏–π –∫–æ–¥ –Ω–∞ Go:
```rust
// –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –æ–ø—É—â–µ–Ω–∞ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã

func foo(...) ReturnType {
    data := doIo()
    result := compute(data)
    moreData = doMoreIo(result)
    moreResult := moreCompute(data)
    // ...
    return someFinalResult
}
```
–Ω–∞ Rust –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
```rust
// –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –æ–ø—É—â–µ–Ω–∞ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã

fn foo(...) -> Future<ReturnType, ErrorType> {
    do_io().and_then(|data| do_more_io(compute(data)))
          .and_then(|more_data| do_even_more_io(more_compute(more_data)))
    // ......
}
```
–ù–µ –∫—Ä–∞—Å–∏–≤–æ. [–ö–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —Ö—É–∂–µ, –µ—Å–ª–∏ –≤—ã –≤–≤–æ–¥–∏—Ç–µ –≤–µ—Ç–≤–ª–µ–Ω–∏–µ –∏ —Ü–∏–∫–ª—ã][worse].
–ü—Ä–æ–±–ª–µ–º–æ–π —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –≤ Go –º—ã –ø–æ–ª—É—á–∞–ª–∏ —Ç–æ—á–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è
(_interruption points_) –±–µ—Å–ø–ª–∞—Ç–Ω–æ, –Ω–æ –≤ Rust –º—ã –¥–æ–ª–∂–Ω—ã –≤—Ä—É—á–Ω—É—é –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ
—Å–≤—è–∑—ã–≤–∞–Ω–∏–µ–º –∫–æ–º–±–∏–Ω–∞—Ç–æ—Ä–æ–≤ –≤ —Ü–µ–ø–æ—á–∫—É, –ø–æ–ª—É—á–∞—è –Ω–µ–∫–æ–µ –ø–æ–¥–æ–±–∏–µ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
(–∞–≤—Ç–æ–º–∞—Ç–∞).

---
## –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∏ `async/await`
–≠—Ç–æ —Ç–æ –º–µ—Å—Ç–æ, –≥–¥–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã (–µ—â—ë –∏—Ö –∫–æ—Ä—É—Ç–∏–Ω–∞–º–∏).
[–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã][gen] —è–≤–ª—è—é—Ç—Å—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –≤ Rust. –í–æ—Ç –ø—Ä–∏–º–µ—Ä:
```rust
let mut generator = || {
    let i = 0;
    loop {
        yield i;
        i += 1;
    }
};
assert_eq!(generator.resume(), GeneratorState::Yielded(0));
assert_eq!(generator.resume(), GeneratorState::Yielded(1));
assert_eq!(generator.resume(), GeneratorState::Yielded(2));
```

–§—É–Ω–∫—Ü–∏–∏ - —ç—Ç–æ —Å—É—â–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è—é—Ç –∑–∞–¥–∞—á—É –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
–≤—ã–∑—ã–≤–∞—é—â–µ–º—É –∫–æ–¥—É –æ–¥–∏–Ω —Ä–∞–∑. –ê –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å (`yield`) –Ω–µ—Å–∫–æ–ª—å–∫–æ
—Ä–∞–∑: –æ–Ω–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤–µ—Ä–Ω—É—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ, –∏
–º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–¥–æ–ª–∂–µ–Ω—ã, –ø—Ä–∏ —ç—Ç–æ –æ–Ω–∏ –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ `yield`.
–•–æ—Ç—è –º–æ–π –ø—Ä–∏–º–µ—Ä –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç—Ç–æ–≥–æ, –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –º–æ–≥—É—Ç –∑–∞–≤–µ—Ä—à–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–∞–∫
–∂–µ, –∫–∞–∫ –∏ –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏.

–ó–∞–º—ã–∫–∞–Ω–∏—è –≤ Rust —è–≤–ª—è—é—Ç—Å—è [—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–º —Å–∞—Ö–∞—Ä–æ–º –Ω–∞–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π, –∫–æ—Ç–æ—Ä–∞—è
—Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã–µ (_captured_) –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ + —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –æ–¥–Ω–æ–≥–æ –∏–∑
`Fn`-—Ç–∏–ø–∞–∂–µ–π (`trait`), –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤—ã–∑—ã–≤–∞–µ–º–æ–π
(_callable_)][sugar].

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –ø–æ—Ö–æ–∂–∏ –Ω–∞ –Ω–∏—Ö, –∫–æ –≤—Å–µ–º—É –ø—Ä–æ—á–µ–º—É –æ–Ω–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç —Ç–∏–ø–∞–∂ `Generator` –∏
–æ–±—ã—á–Ω–æ —Å–æ–¥–µ—Ä–∂–∞—Ç –≤ —Å–µ–±–µ `enum`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Ä–∞–∑–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

["–ù–µ—Å—Ç–∞–±–∏–ª—å–Ω–∞—è" –∫–Ω–∏–≥–∞][unstable] –∏–º–µ–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–º–µ—Ä—ã —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç
–¥–∞–Ω–Ω–∞—è –º–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π.

–≠—Ç–æ –≥–æ—Ä–∞–∑–¥–æ –±–ª–∏–∂–µ –∫ —Ç–æ–º—É, —á—Ç–æ –º—ã –∏—Å–∫–∞–ª–∏! –¢–µ–ø–µ—Ä—å –Ω–∞—à –∫–æ–¥ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:
```rust
fn foo(...) -> Future<ReturnType, ErrorType> {
    let generator = || {
        let mut future = do_io();
        let data;
        loop {
            // –æ–ø—Ä–æ—Å–∏—Ç—å —Ñ—É—Ç—É—Ä—É, –≤–æ–∑–≤—Ä–∞—â–∞—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑
            // –∫–æ–≥–¥–∞ —Å–ª—É—á–∞–µ—Ç—Å—è –æ—à–∏–±–∫–∞, –Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∞—è –ø—Ä–∏ —É—Å–ø–µ—Ö–µ
            match future.poll() {
                Ok(Async::Ready(d)) => { data = d; break },
                Ok(Async::NotReady(d)) => (),
                Err(..) => ...
            };
            yield future.polling_info();
        }
        let result = compute(data);
        // –¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ —Å–∞–º–æ–µ –¥–ª—è `doMoreIo()`, –∏ —Ç. –¥.
    }

    futurify(generator)
}
``` 
`futurify` - —Ñ—É–Ω–∫—Ü–∏—è, –ø—Ä–∏–Ω–∏–º–∞—é—â–∞—è –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—â–∞—è —Ñ—É—Ç—É—Ä—É, –∫–æ—Ç–æ—Ä–∞—è
–ø—Ä–∏ –∫–∞–∂–¥–æ–º –≤—ã–∑–æ–≤–µ `poll` –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å `resume()` –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å
`NotReady` –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –Ω–µ –∑–∞–≤–µ—Ä—à–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ.

–ù–æ –ø–æ—Å—Ç–æ–π—Ç–µ, —ç—Ç–æ –µ—â—ë –±–æ–ª–µ–µ —É—Ä–æ–¥–ª–∏–≤–æ! –í —á—ë–º —Å–º—ã—Å–ª –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–Ω–∏—è –Ω–∞—à–µ–≥–æ
–æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —á–∏—Å—Ç–æ–π —Ü–µ–ø–æ—á–∫–∏ –∏–∑ callback'–æ–≤ –≤ —ç—Ç–æ –º–µ—Å—Å–∏–≤–æ?

–ï—Å–ª–∏ –≤—ã –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ, —Ç–æ —É–≤–∏–¥–∏—Ç–µ, —á—Ç–æ –∫–æ–¥ —è–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º.
–ú—ã –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–ª–∏ –Ω–∞—à callback-–∫–æ–¥ –≤ —Ç–æ—Ç –∂–µ –ª–∏–Ω–µ–π–Ω—ã–π –ø–æ—Ç–æ–∫, –∫–∞–∫ –∏ Go-–∫–æ–¥,
–æ–¥–Ω–∞–∫–æ –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç —Å—Ç—Ä–∞–Ω–Ω—ã–π `yield`-–∫–æ–¥ –≤ —Ü–∏–∫–ª–µ, `futurify` —Ç–æ–∂–µ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–µ
–ø—Ä–∏–≥–ª—è–¥–Ω–æ.

–ó–¥–µ—Å—å –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥–∏—Ç [futures-await][fa]. `futures-await` - —ç—Ç–æ
–ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–µ –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ —É–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–π –∏–∑–±—ã—Ç–æ—á–Ω—ã–π –∫–æ–¥. –í
—Å—É—â–Ω–æ—Å—Ç–∏ –æ–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ç–∞–∫:
```rust
#[async]
fn foo(...) -> Result<ReturnType, ErrorType> {
    let data = await!(do_io());
    let result = compute(data);
    let more_data = await!(do_more_io());
    // ....
``` 
–ê–∫–∫—É—Ä–∞—Ç–Ω–æ –∏ —á–∏—Å—Ç–æ. –ü–æ—á—Ç–∏ —Ç–∞–∫ –∂–µ —á–∏—Å—Ç–æ, –∫–∞–∫ –∏ –∫–æ–¥ –Ω–∞ Go, —Ç–∞–∫–∂–µ –º—ã
–Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤—ã–∑—ã–≤–∞–µ–º `await!()`. –î–∞–Ω–Ω—ã–µ `await`-–≤—ã–∑–æ–≤—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Ç—É –∂–µ
—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, —á—Ç–æ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Ç–æ—á–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –≤ Go.

–ò, —Ä–∞–∑—É–º–µ–µ—Ç—Å—è, —Ç–∞–∫ –∫–∞–∫ –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã,  —Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
—Ü–∏–∫–ª, –≤–≤–æ–¥–∏—Ç—å –≤–µ—Ç–≤–ª–µ–Ω–∏–µ –∏ –¥–µ–ª–∞—Ç—å –≤—Å–µ, —á—Ç–æ –≤–∞–º —Ö–æ—á–µ—Ç—Å—è, –∞ –∫–æ–¥ –≤—Å–µ —Ç–∞–∫ –∂–µ –±—É–¥–µ—Ç
–æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —á–∏—Å—Ç—ã–º.

---
## –ü–æ–¥–≤–æ–¥—è –∏—Ç–æ–≥–∏
–§—É—Ç—É—Ä—ã –≤ Rust –º–æ–≥—É—Ç –±—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –≤ —Ü–µ–ø–æ—á–∫—É –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è –ª–µ–≥–∫–æ–≤–µ—Å–Ω–æ–π
—Å—Ç–µ–∫–æ-–ø–æ–¥–æ–±–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. –° `async/await` –º—ã –º–æ–∂–µ—Ç–µ –∫—Ä–∞—Å–∏–≤–æ –ø–∏—Å–∞—Ç—å —Ü–µ–ø–æ—á–∫–∏
—Ñ—É—Ç—É—Ä, –∞ `await` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —è–≤–Ω—ã–µ —Ç–æ—á–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –Ω–∞ –∫–∞–∂–¥–æ–π I/O-–æ–ø–µ—Ä–∞—Ü–∏–∏.
`Tokio` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç "–ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫" - –≥–ª–∞–≤–Ω—ã–π —Å–æ–±—ã—Ç–∏–π–Ω—ã–π —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä–æ–º—É –≤—ã
–º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, "–ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º" –∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `mio` –¥–ª—è
–∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö I/O-–ø—Ä–∏–º–∏—Ç–∏–≤–æ–≤.

–≠—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ - –≤—ã –º–æ–∂–µ—Ç–µ
–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Tokio` —Å —Ñ—É—Ç—É—Ä–∞–º–∏, –±–µ–∑ `async/await`. –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
`async/await` –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `Tokio`. –ù–∞–ø—Ä–∏–º–µ—Ä, —ç—Ç–æ –º–æ–∂–µ—Ç –ø–æ–¥—Ö–æ–¥–∏—Ç—å
—Å–µ—Ç–µ–≤–æ–º—É —Å—Ç–µ–∫—É Servo. –ï–º—É –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ
I/O (–ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ, –Ω–µ –ø–æ—Ä—è–¥–∫–∞ —Ç—ã—Å—è—á–∏ –Ω–∏—Ç–µ–π), —Ç–∞–∫ —á—Ç–æ –æ–Ω –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
–º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∏—Ç–∏ –û–°. –û–¥–Ω–∞–∫–æ –º—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Ö–æ—Ç–∏–º –∏–º–µ—Ç—å –ø—É–ª –Ω–∏—Ç–µ–π –∏
–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ (pipeline) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –∞ async/await —è–≤–ª—è–µ—Ç—Å—è –∑–¥–µ—Å—å
—Ö–æ—Ä–æ—à–∏–º –ø–æ–¥—Å–ø–æ—Ä—å–µ–º.

–û–±–æ–±—â–∏–º: –≤—Å–µ —ç—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ–≥–æ
(_boilerplate_) –∫–æ–¥–∞, –¥–∞—é—Ç –Ω–µ—á—Ç–æ –ø–æ—á—Ç–∏ —Ç–∞–∫–æ–µ –∂–µ "—á–∏—Å—Ç–æ–µ", –∫–∞–∫ –∏ –≥–æ—Ä—É—Ç–∏–Ω—ã –≤ Go.
–ê —Ç–∞–∫ –∫–∞–∫ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã (–∞ —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –∏ `async/await`) —Ö–æ—Ä–æ—à–æ —Å–æ—Å—É—â–µ—Å—Ç–≤—É—é—Ç c
–∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–º –∑–∞–∏–º—Å—Ç–≤–æ–≤–∞–Ω–∏–π (**_borrow checker_**, borrowck), —Ç–æ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã
–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Rust, –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –≤ —Å–∏–ª–µ, –∏ –º—ã –ø–æ–ª—É—á–∞–µ–º
"–±–µ–∑–±–æ—è–∑–Ω–µ–Ω–Ω—É—é –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—å" –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç –±–æ–ª—å—à–æ–π –æ–±—ä–µ–º
I/O-–∑–∞–¥–∞—á.

---
[1]: –≠—Ç–æ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π.
–ù–∞–ø—Ä–∏–º–µ—Ä, `Apache HTTP Server` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–∏—Ç–∏ –û–°. –ß–∞—Å—Ç–æ –Ω–∏—Ç–∏ –û–° —è–≤–ª—è—é—Ç—Å—è –Ω–∞–∏–ª—É—á—à–∏–º
–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏.

[2]: –ü—Ä–æ –ª–µ–≥–∫–æ–≤–µ—Å–Ω—ã–µ –Ω–∏—Ç–∏ –≥–æ–≤–æ—Ä—è—Ç, —á—Ç–æ –æ–Ω–∏ —Ä–µ–∞–ª–∏–∑—É—é—Ç –º–æ–¥–µ–ª—å M:N –º–æ–¥–µ–ª—å -
(_"green" threading_).
  
[c10k]: https://en.wikipedia.org/wiki/C10k_problem
[fa]: https://github.com/alexcrichton/futures-await
[gen]: https://doc.rust-lang.org/nightly/unstable-book/language-features/generators.html
[mio]: https://github.com/carllerche/mio
[sugar]: http://huonw.github.io/blog/2015/05/finding-closure-in-rust/
[tokio]: https://github.com/tokio-rs/
[unstable]: https://doc.rust-lang.org/nightly/unstable-book/language-features/generators.html#generators-as-state-machines
[worse]: http://alexcrichton.com/futures-rs/futures/future/fn.loop_fn.html#examples